{% extends "layout/index.html" %}
{% block title %}Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ | Ù…ÙˆØ§Ø±Ø¯ÙŠ{% endblock %}

{% block content %}
<section class="dashboard-wrapper container">

    <div class="db-header animate__animated animate__fadeIn">
        <div class="welcome-text">
            <div class="user-avatar">
                <i class="fas fa-user-tie"></i>
            </div>
            <div>
                <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ request.user.get_full_name|default:request.user.username }} <span class="wave">ğŸ‘‹</span>
                </h1>
                <p>Ø¥Ù„ÙŠÙƒ Ù…Ù„Ø®Øµ Ù†Ø´Ø§Ø· Ø´Ø±ÙƒØ© <span class="company-tag">{{ request.user.company.name }}</span> Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ….</p>
            </div>
        </div>

        <div class="header-actions">
            <a href="{% url 'requests:create_wizard' %}" class="btn-action pulse-animation">
                <i class="fas fa-plus-circle"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
            </a>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-item animate__animated animate__fadeInUp" style="animation-delay: 0.1s;">
            <div class="stat-icon blue"><i class="fas fa-handshake"></i></div>
            <div class="stat-info">
                <span class="label">Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ¹Ø§Ù‚Ø¯Ø©</span>
                <span class="count">{{ vendors_count|default:"0" }}</span>
            </div>
            <div class="stat-progress">
                <div class="bar" style="width: 100%; background: #3b82f6;"></div>
            </div>
        </div>

        <div class="stat-item animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
            <div class="stat-icon purple"><i class="fas fa-folder-open"></i></div>
            <div class="stat-info">
                <span class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                <span class="count">12</span>
            </div>
            <div class="stat-progress">
                <div class="bar" style="width: 100%"></div>
            </div>
        </div>

        <div class="stat-item animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
            <div class="stat-icon orange"><i class="fas fa-spinner fa-spin"></i></div>
            <div class="stat-info">
                <span class="label">Ø·Ù„Ø¨Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
                <span class="count">5</span>
            </div>
            <div class="stat-progress">
                <div class="bar" style="width: 40%; background: #ea580c;"></div>
            </div>
        </div>

        <div class="stat-item animate__animated animate__fadeInUp" style="animation-delay: 0.4s;">
            <div class="stat-icon green"><i class="fas fa-check-double"></i></div>
            <div class="stat-info">
                <span class="label">Ø·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</span>
                <span class="count">7</span>
            </div>
            <div class="stat-progress">
                <div class="bar" style="width: 60%; background: #16a34a;"></div>
            </div>
        </div>
    </div>

    <div class="row-grid">
        <div class="data-card animate__animated animate__fadeInUp" style="animation-delay: 0.5s;">
            <div class="card-header">
                <h3><i class="fas fa-history"></i> Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø±ÙƒØ§Øª</h3>
                <button class="btn-view-all">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
            </div>

            <div class="table-responsive">
                <table class="modern-table">
                    <thead>
                        <tr>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                            <th>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="id-cell">#1023</td>
                            <td class="type-cell"><i class="fas fa-calendar-alt"></i> Ø¥Ø¬Ø§Ø²Ø©</td>
                            <td><span class="badge pending-light"><i class="fas fa-clock"></i> Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span></td>
                            <td class="date-cell">2026-01-12</td>
                            <td><button class="btn-table"><i class="fas fa-eye"></i></button></td>
                        </tr>
                        <tr>
                            <td class="id-cell">#1022</td>
                            <td class="type-cell"><i class="fas fa-handholding-medkit"></i> ØªØ£Ù…ÙŠÙ† Ø·Ø¨ÙŠ</td>
                            <td><span class="badge approved-light"><i class="fas fa-check-circle"></i> Ù…ÙƒØªÙ…Ù„</span></td>
                            <td class="date-cell">2026-01-10</td>
                            <td><button class="btn-table"><i class="fas fa-eye"></i></button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="data-card animate__animated animate__fadeInUp" style="animation-delay: 0.6s;">
            <div class="card-header">
                <h3><i class="fas fa-briefcase"></i> Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØ±ÙŠØ¯</h3>
                <a href="{% url 'vendors:vendor_create' %}" class="btn-details">
                    <i class="fas fa-building"></i> Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ© ØªÙˆØ±ÙŠØ¯

                </a>
            </div>
            <div class="vendor-list">
                {% for vendor in vendors %}
                <div class="vendor-item animate__animated animate__fadeInRight"
                    style="animation-delay: {{ forloop.counter }}00ms;">
                    <div class="vendor-info">
                        <div class="vendor-logo"><i class="fas fa-building"></i></div>
                        <div>
                            <h4>{{ vendor.company.name }}</h4>
                            <p><i class="fas fa-users"></i> {{ vendor.workers_count }} Ø¹Ø§Ù…Ù„</p>
                        </div>
                    </div>
                    <a href="{% url 'vendors:vendor_detail' vendor.pk %}" class="btn-details">
                        ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ© <i class="fas fa-chevron-left"></i>
                    </a>
                </div>
                {% empty %}
                <div class="text-center" style="padding: 20px; color: #94a3b8;">
                    <i class="fas fa-info-circle"></i> Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±ÙƒØ§Øª ØªÙˆØ±ÙŠØ¯ Ù…Ø³Ø¬Ù„Ø©.
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

</section>

<style>
    /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    :root {
        --primary: #10b981;
        --primary-dark: #059669;
        --dark: #1e293b;
        --light-bg: #f8fafc;
    }

    .dashboard-wrapper {
        margin-right: 80px;
        direction: rtl;
        transition: margin 0.4s
    }

    body:has(.sidebar-mini.closed) .dashboard-wrapper {
        margin-right: 0;
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .db-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
    }

    .welcome-text {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .user-avatar {
        width: 60px;
        height: 60px;
        background: var(--primary);
        color: white;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        box-shadow: 0 10px 20px rgba(16, 185, 129, 0.2);
    }

    .db-header h1 {
        font-size: 26px;
        font-weight: 800;
        margin: 0;
        color: var(--dark);
    }

    .company-tag {
        color: var(--primary);
        text-decoration: underline;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn-action {
        background: var(--dark);
        color: white;
        padding: 12px 25px;
        border-radius: 12px;
        text-decoration: none;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: 0.3s;
    }

    .btn-action:hover {
        background: var(--primary-dark);
        transform: translateY(-3px);
    }

    /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }

    .stat-item {
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.03);
        position: relative;
    }

    .stat-icon {
        width: 45px;
        height: 45px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        margin-bottom: 15px;
    }

    .purple {
        background: #f5f3ff;
        color: #7c3aed;
    }

    .orange {
        background: #fff7ed;
        color: #ea580c;
    }

    .green {
        background: #f0fdf4;
        color: #16a34a;
    }

    .blue {
        background: #eff6ff;
        color: #3b82f6;
    }

    .stat-info .label {
        display: block;
        color: #64748b;
        font-size: 13px;
        margin-bottom: 5px;
    }

    .stat-info .count {
        font-size: 28px;
        font-weight: 800;
        color: var(--dark);
    }

    .stat-progress {
        height: 5px;
        background: #f1f5f9;
        border-radius: 10px;
        margin-top: 15px;
        overflow: hidden;
    }

    .stat-progress .bar {
        height: 100%;
        background: var(--primary);
    }

    /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙƒØ±ÙˆØª */
    .row-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 25px;
    }

    .data-card {
        background: white;
        border-radius: 24px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.02);
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 25px;
        align-items: center;
    }

    .card-header h3 {
        font-size: 18px;
        font-weight: 700;
        color: var(--dark);
        margin: 0;
    }

    .btn-view-all {
        background: none;
        border: 1px solid #e2e8f0;
        padding: 5px 15px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 12px;
    }

    /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    .modern-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
    }

    .modern-table th {
        padding: 12px;
        text-align: right;
        color: #94a3b8;
        font-size: 13px;
    }

    .modern-table td {
        padding: 15px;
        background: #f8fafc;
        border: none;
        font-size: 14px;
    }

    .modern-table tr td:first-child {
        border-radius: 0 12px 12px 0;
    }

    .modern-table tr td:last-child {
        border-radius: 12px 0 0 12px;
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØ±ÙŠØ¯ */
    .vendor-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .vendor-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border: 1px solid #f1f5f9;
        border-radius: 15px;
        transition: 0.3s;
        text-decoration: none;
    }

    .vendor-item:hover {
        border-color: var(--primary);
        background: #f0fdf4;
        transform: scale(1.02);
    }

    .vendor-info {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .vendor-logo {
        width: 40px;
        height: 40px;
        background: #f1f5f9;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
    }

    .vendor-info h4 {
        margin: 0;
        font-size: 14px;
        color: var(--dark);
    }

    .vendor-info p {
        margin: 0;
        font-size: 12px;
        color: #94a3b8;
    }

    .btn-details {
        font-size: 12px;
        font-weight: bold;
        color: var(--primary);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    /* Ø§Ù„Ø¨Ø§Ø¯Ø¬Ø§Øª */
    .badge {
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 11px;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 5px;
        width: fit-content;
    }

    .pending-light {
        background: #fef3c7;
        color: #92400e;
    }

    .approved-light {
        background: #dcfce7;
        color: #15803d;
    }

    .btn-table {
        background: white;
        border: 1px solid #e2e8f0;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
    }

    .btn-table:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }

    /* Ø§Ù„Ø­Ø±ÙƒØ§Øª */
    .wave {
        display: inline-block;
        animation: wave-animation 2.5s infinite;
        transform-origin: 70% 70%;
    }

    @keyframes wave-animation {

        0%,
        100% {
            transform: rotate(0deg);
        }

        10%,
        30% {
            transform: rotate(14deg);
        }

        20% {
            transform: rotate(-8deg);
        }
    }

    .pulse-animation {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
        }

        70% {
            box-shadow: 0 0 0 15px rgba(16, 185, 129, 0);
        }

        100% {
            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
        }
    }

    /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
    @media (max-width: 992px) {
        .row-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .db-header {
            flex-direction: column;
            text-align: center;
            gap: 20px;
        }

        .welcome-text {
            flex-direction: column;
        }
    }
</style>
{% endblock %}